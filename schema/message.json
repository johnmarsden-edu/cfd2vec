{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Message",
  "type": "object",
  "required": [
    "methods",
    "nodes",
    "program_id"
  ],
  "properties": {
    "methods": {
      "type": "array",
      "items": {
        "type": "integer",
        "format": "uint32",
        "minimum": 0.0
      }
    },
    "nodes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AstNode"
      }
    },
    "program_id": {
      "type": "string"
    }
  },
  "definitions": {
    "AstNode": {
      "type": "object",
      "required": [
        "contents",
        "node_type"
      ],
      "properties": {
        "contents": {
          "$ref": "#/definitions/AstNodeContents"
        },
        "label": {
          "type": [
            "string",
            "null"
          ]
        },
        "node_type": {
          "type": "string"
        }
      }
    },
    "AstNodeContents": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "FunctionBlock"
          ],
          "properties": {
            "FunctionBlock": {
              "$ref": "#/definitions/FunctionBlock"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "LoopBlock"
          ],
          "properties": {
            "LoopBlock": {
              "$ref": "#/definitions/LoopBlock"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "DecisionBlock"
          ],
          "properties": {
            "DecisionBlock": {
              "$ref": "#/definitions/DecisionBlock"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "TryBlock"
          ],
          "properties": {
            "TryBlock": {
              "$ref": "#/definitions/TryBlock"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "CatchBlock"
          ],
          "properties": {
            "CatchBlock": {
              "$ref": "#/definitions/CatchBlock"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "ThrowStatement"
          ],
          "properties": {
            "ThrowStatement": {
              "$ref": "#/definitions/ThrowStatement"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Statement"
          ],
          "properties": {
            "Statement": {
              "$ref": "#/definitions/Stmt"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "YieldStatement"
          ],
          "properties": {
            "YieldStatement": {
              "$ref": "#/definitions/YieldStatement"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Break"
          ],
          "properties": {
            "Break": {
              "$ref": "#/definitions/Break"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Continue"
          ],
          "properties": {
            "Continue": {
              "$ref": "#/definitions/Continue"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Return"
          ],
          "properties": {
            "Return": {
              "$ref": "#/definitions/Return"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Decision"
          ],
          "properties": {
            "Decision": {
              "$ref": "#/definitions/Decision"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Goto"
          ],
          "properties": {
            "Goto": {
              "$ref": "#/definitions/Goto"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "Break": {
      "type": "object",
      "properties": {
        "label": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "CatchBlock": {
      "type": "object",
      "required": [
        "breakable",
        "continuable",
        "exception_types",
        "statements"
      ],
      "properties": {
        "breakable": {
          "type": "boolean"
        },
        "continuable": {
          "type": "boolean"
        },
        "exception_types": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "statements": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        }
      }
    },
    "Continue": {
      "type": "object",
      "properties": {
        "label": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "Decision": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Empty"
          ]
        },
        {
          "type": "object",
          "required": [
            "And"
          ],
          "properties": {
            "And": {
              "type": "array",
              "items": [
                {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0.0
                },
                {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0.0
                }
              ],
              "maxItems": 2,
              "minItems": 2
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Or"
          ],
          "properties": {
            "Or": {
              "type": "array",
              "items": [
                {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0.0
                },
                {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0.0
                }
              ],
              "maxItems": 2,
              "minItems": 2
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "Unit"
          ],
          "properties": {
            "Unit": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "DecisionBlock": {
      "type": "object",
      "required": [
        "breakable",
        "continuable",
        "decision",
        "statements"
      ],
      "properties": {
        "breakable": {
          "type": "boolean"
        },
        "continuable": {
          "type": "boolean"
        },
        "decision": {
          "$ref": "#/definitions/Decision"
        },
        "statements": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        }
      }
    },
    "FunctionBlock": {
      "type": "object",
      "required": [
        "breakable",
        "continuable",
        "namespace",
        "parameter",
        "statements"
      ],
      "properties": {
        "breakable": {
          "type": "boolean"
        },
        "continuable": {
          "type": "boolean"
        },
        "name": {
          "type": [
            "string",
            "null"
          ]
        },
        "namespace": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "parameter": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "statements": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        }
      }
    },
    "Goto": {
      "type": "object",
      "required": [
        "label"
      ],
      "properties": {
        "label": {
          "type": "string"
        }
      }
    },
    "LoopBlock": {
      "type": "object",
      "required": [
        "breakable",
        "continuable",
        "decision",
        "first_iteration_decision",
        "initialization",
        "statements",
        "update"
      ],
      "properties": {
        "breakable": {
          "type": "boolean"
        },
        "continuable": {
          "type": "boolean"
        },
        "decision": {
          "$ref": "#/definitions/Decision"
        },
        "first_iteration_decision": {
          "type": "boolean"
        },
        "initialization": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "statements": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        },
        "update": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Return": {
      "type": "object",
      "properties": {
        "expression": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "Stmt": {
      "type": "object",
      "required": [
        "calls",
        "code"
      ],
      "properties": {
        "calls": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        },
        "code": {
          "type": "string"
        }
      }
    },
    "ThrowStatement": {
      "type": "object",
      "required": [
        "calls",
        "code",
        "exception"
      ],
      "properties": {
        "calls": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        },
        "code": {
          "type": "string"
        },
        "exception": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "TryBlock": {
      "type": "object",
      "required": [
        "breakable",
        "catches",
        "continuable",
        "statements"
      ],
      "properties": {
        "breakable": {
          "type": "boolean"
        },
        "catches": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        },
        "continuable": {
          "type": "boolean"
        },
        "statements": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        }
      }
    },
    "YieldStatement": {
      "type": "object",
      "required": [
        "calls",
        "code"
      ],
      "properties": {
        "calls": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "uint32",
            "minimum": 0.0
          }
        },
        "code": {
          "type": "string"
        }
      }
    }
  }
}